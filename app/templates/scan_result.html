{% extends "base.html" %}

{% block title %}Scan Result - EventTix{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto px-4 py-8">
    <!-- Result Card -->
    <div class="bg-white/10 backdrop-blur-lg rounded-2xl border border-white/10 p-8 text-center">

        {% if result.status == 'VALID' %}
        <!-- Valid Entry -->
        <div class="w-24 h-24 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse">
            <span class="text-5xl">‚úÖ</span>
        </div>
        <h1 class="text-3xl font-bold text-green-400 mb-2">ENTRY ALLOWED</h1>
        <p class="text-gray-400">Ticket verified successfully</p>

        {% elif result.status == 'USED' %}
        <!-- Already Used -->
        <div class="w-24 h-24 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
            <span class="text-5xl">‚ö†Ô∏è</span>
        </div>
        <h1 class="text-3xl font-bold text-yellow-400 mb-2">ALREADY USED</h1>
        <p class="text-gray-400">This ticket has already been scanned</p>
        {% if result.scanned_at %}
        <p class="text-yellow-500 text-sm mt-2">First scan: {{ result.scanned_at }}</p>
        {% endif %}

        {% elif result.status == 'CHECKED_IN' %}
        <!-- Checked In View -->
        <div class="w-24 h-24 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
            <span class="text-5xl">üìã</span>
        </div>
        <h1 class="text-3xl font-bold text-blue-400 mb-2">ALREADY CHECKED IN</h1>
        <p class="text-gray-400">This attendee is already present</p>

        {% else %}
        <!-- Invalid -->
        <div class="w-24 h-24 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
            <span class="text-5xl">‚ùå</span>
        </div>
        <h1 class="text-3xl font-bold text-red-400 mb-2">INVALID TICKET</h1>
        <p class="text-gray-400">{{ result.message }}</p>
        {% endif %}

        <!-- Ticket Details -->
        {% if result.ticket %}
        <div class="mt-8 bg-white/5 rounded-xl p-6 text-left border border-white/10">
            <h3 class="text-white font-semibold mb-4">Ticket Details</h3>
            <div class="space-y-3">
                <div class="flex justify-between">
                    <span class="text-gray-400">Team Name</span>
                    <span class="text-white font-medium">{{ result.ticket.team_name }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-400">Ticket ID</span>
                    <span class="text-gray-300 font-mono text-sm">{{ result.ticket.ticket_id }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-400">User ID</span>
                    <span class="text-gray-300 font-mono text-sm">{{ result.ticket.user_id }}</span>
                </div>
                {% if result.ticket.slot %}
                <div class="flex justify-between">
                    <span class="text-gray-400">Slot</span>
                    <span class="text-gray-300">{{ result.ticket.slot }}</span>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Timestamp -->
        {% if result.timestamp %}
        <p class="text-green-400 text-sm mt-6">
            ‚è∞ Scanned at: {{ result.timestamp }}
        </p>
        {% endif %}
    </div>

    <!-- Actions -->
    <div class="mt-6 flex gap-4">
        <a href="/scan"
            class="flex-1 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-semibold rounded-xl text-center transition-all">
            üì∑ Scan Another
        </a>
        <a href="/admin/attendance"
            class="flex-1 py-3 bg-white/10 hover:bg-white/20 text-white font-semibold rounded-xl text-center transition">
            View Records
        </a>
    </div>
</div>
{% endblock %}